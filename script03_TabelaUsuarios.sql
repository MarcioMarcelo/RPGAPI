BEGIN TRANSACTION;
GO

ALTER TABLE [TB_PERSONAGENS] DROP CONSTRAINT [FK_TB_PERSONAGENS_TB_USUARIOS_UsuarioId];
GO

DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[TB_PERSONAGENS]') AND [c].[name] = N'UsuarioId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [TB_PERSONAGENS] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [TB_PERSONAGENS] ALTER COLUMN [UsuarioId] int NULL;
GO

UPDATE [TB_PERSONAGENS] SET [UsuarioId] = NULL
WHERE [Id] = 1;
SELECT @@ROWCOUNT;

GO

UPDATE [TB_PERSONAGENS] SET [UsuarioId] = NULL
WHERE [Id] = 2;
SELECT @@ROWCOUNT;

GO

UPDATE [TB_PERSONAGENS] SET [UsuarioId] = NULL
WHERE [Id] = 3;
SELECT @@ROWCOUNT;

GO

UPDATE [TB_PERSONAGENS] SET [UsuarioId] = NULL
WHERE [Id] = 4;
SELECT @@ROWCOUNT;

GO

UPDATE [TB_PERSONAGENS] SET [UsuarioId] = NULL
WHERE [Id] = 5;
SELECT @@ROWCOUNT;

GO

UPDATE [TB_PERSONAGENS] SET [UsuarioId] = NULL
WHERE [Id] = 6;
SELECT @@ROWCOUNT;

GO

UPDATE [TB_PERSONAGENS] SET [UsuarioId] = NULL
WHERE [Id] = 7;
SELECT @@ROWCOUNT;

GO

UPDATE [TB_USUARIOS] SET [PasswordHash] = 0x4CF2FDA5B40CEB271C79EEBBCE94C475EEA2AFC43752B7AF92EE550ACF2A1E1C3B5FFDEC23A83D478B2E19B2CCEED2819E29DF65807F04DD423513E1046891C5, [PasswordSalt] = 0xCE760C0ECC53CED56EC2ADF5C08F793FFAACA5C0B342A9FA3E7FAFFF62C9DC02DCE0F88BFB1343B175C28385E65CB1F2F2D19E11DD334A1706A36542BC80B82627274A0C831AC24B0E66239DDD0F6ABAF8B8857BEBE3C2886B7C2F414781374F37256273C7874ACF9C9293A74D6245F373C13A99A968E0066BEF09DCA7FA6D3C
WHERE [Id] = 1;
SELECT @@ROWCOUNT;

GO

ALTER TABLE [TB_PERSONAGENS] ADD CONSTRAINT [FK_TB_PERSONAGENS_TB_USUARIOS_UsuarioId] FOREIGN KEY ([UsuarioId]) REFERENCES [TB_USUARIOS] ([Id]);
GO

INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230927013737_MigracaoUsuario', N'7.0.10');
GO

COMMIT;
GO

